<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.8 plugin-docs plugin-id-default docs-doc-id-how-to-guides/running-air-gapped">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Running When Offline | Rancher Desktop Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.rancherdesktop.io/1.8/how-to-guides/running-air-gapped"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.8"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.8"><meta data-rh="true" name="docsearch:version" content="1.8"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.8"><meta data-rh="true" property="og:title" content="Running When Offline | Rancher Desktop Docs"><meta data-rh="true" name="description" content="Rancher Desktop can be run when offline, aka in air-gapped mode. This document covers requirements"><meta data-rh="true" property="og:description" content="Rancher Desktop can be run when offline, aka in air-gapped mode. This document covers requirements"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.rancherdesktop.io/1.8/how-to-guides/running-air-gapped"><link data-rh="true" rel="alternate" href="https://docs.rancherdesktop.io/1.8/how-to-guides/running-air-gapped" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.rancherdesktop.io/zh/1.8/how-to-guides/running-air-gapped" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.rancherdesktop.io/1.8/how-to-guides/running-air-gapped" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.2b01b4e6.css">
<link rel="preload" href="/assets/js/runtime~main.46ace309.js" as="script">
<link rel="preload" href="/assets/js/main.5ef57267.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Rancher Desktop Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Rancher Desktop Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/1.8/">1.8</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/how-to-guides/running-air-gapped">Next ðŸš§</a></li><li><a class="dropdown__link" href="/how-to-guides/running-air-gapped">Latest</a></li><li><a class="dropdown__link" href="/1.9/how-to-guides/running-air-gapped">1.9</a></li><li><a class="dropdown__link" href="/1.9-tech-preview/how-to-guides/running-air-gapped">1.9-tech-preview</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/1.8/how-to-guides/running-air-gapped">1.8</a></li><li><a class="dropdown__link" href="/1.7/how-to-guides/running-air-gapped">1.7</a></li><li><a class="dropdown__link" href="/1.6/how-to-guides/running-air-gapped">1.6</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Links</a><ul class="dropdown__menu"><li><a href="https://rancherdesktop.io/" target="_self" rel="noopener noreferrer" class="dropdown__link">Rancher Desktop Home<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/rancher-sandbox/rancher-desktop/" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/rancher-sandbox/docs.rancherdesktop.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Docs GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/1.8/how-to-guides/running-air-gapped" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh/1.8/how-to-guides/running-air-gapped" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh">ç®€ä½“ä¸­æ–‡</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/1.8/">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/getting-started/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/getting-started/deployment">Deployment Profiles</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/1.8/ui/general">User Interface</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/1.8/tutorials/working-with-images">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/1.8/how-to-guides/hello-world-example">How-to Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/hello-world-example">Hello World Example</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/transfer-container-images">Transfer Container Images</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/create-multi-node-cluster">Create a Multi-Node Cluster with k3d</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/setup-NGINX-Ingress-Controller">Setup NGINX Ingress Controller</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/vs-code-docker">Debugging a Container App with VS Code Docker extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/vs-code-remote-containers">VS Code Remote Containers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/rancher-on-rancher-desktop">Rancher on Rancher Desktop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/skaffold-and-rancher-desktop">Skaffold and Rancher Desktop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/provisioning-scripts">Provisioning Scripts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/1.8/how-to-guides/increasing-open-file-limit">Increasing Open File Limit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/1.8/how-to-guides/running-air-gapped">Running When Offline</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/1.8/references/architecture">References</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/1.8/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/1.8/troubleshooting-tips">Troubleshooting Tips</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">How-to Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Running When Offline</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.8</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Running When Offline</h1></header><p>Rancher Desktop can be run when offline, aka in air-gapped mode. This document covers requirements
and possible problems when running in air-gapped mode.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-note-for-windows-users">A Note for Windows users<a href="#a-note-for-windows-users" class="hash-link" aria-label="Direct link to A Note for Windows users" title="Direct link to A Note for Windows users">â€‹</a></h3><p>This document uses Powershell syntax for environment variables. If you&#x27;re using the Command shell
instead, where you see an environment variable reference of <code>$env:FOO</code>, please substitute it with <code>%FOO%</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="network-sensitive-areas">Network-Sensitive areas<a href="#network-sensitive-areas" class="hash-link" aria-label="Direct link to Network-Sensitive areas" title="Direct link to Network-Sensitive areas">â€‹</a></h3><p>There are two areas where Rancher Desktop assumes network availability and will recover in an air-gapped situation:</p><ol><li><p>Pulling Kubernetes <code>k3s</code> images into the <code>k3s</code> cache directory</p></li><li><p>Using <code>kuberlr</code> as a version-aware wrapper around <code>kubectl</code>, so the client never differs from the Kubernetes server by more than one minor version.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="existing-deployments">Existing Deployments<a href="#existing-deployments" class="hash-link" aria-label="Direct link to Existing Deployments" title="Direct link to Existing Deployments">â€‹</a></h3><p>If Rancher Desktop has been installed on a machine initially with networked access, it can
be run subsequently on that machine after network connectivity has been turned off. The main
difference in core functionality is that the list of versions of Kubernetes available in drop-down menus
is limited to those versions that have actually been downloaded and stored in the cache.</p><p>There is a problem using the <code>kubectl</code> client, because of the <code>kuberlr</code> wrapper (Windows users should add the <code>.exe</code> suffix to each executable utility file).</p><p>In this case, we&#x27;re discussing a system that was initialized when connected to the internet, but we&#x27;re about
to take the machine offline for future use.</p><p>Suppose there are three versions of <code>k3s</code> in the <code>rancher-desktop</code> cache.</p><ul><li><p>1.24.3</p></li><li><p>1.21.14</p></li><li><p>1.19.16</p></li></ul><p>But suppose that on this system we only ran <code>kubectl</code> when using versions <code>1.24.3</code> and <code>1.21.14</code>. This means that
the <code>~/.kuberlr/PLATFORM-ARCH/</code> directory (<code>$env:HOMEDRIVE%\$env:HOMEPATH/.kuberlr/windows-amd64</code> on Windows) will contain only two files:</p><ul><li><p>kubectl1.24.3</p></li><li><p>kubectl1.21.14</p></li></ul><p>If we go offline and use the UI to switch to Kubernetes <code>1.19.16</code>, when <code>kubectl</code> is run, the system will fail.
The problem is that <code>kubectl</code> is an alias for <code>kuberlr</code>, which will try to download <code>kubectl 1.19.16</code> and install it
in the <code>.kuberlr</code> directory, but won&#x27;t be able to access it.</p><p>So in this case, it would be best to prepare a connected system for disconnecting by selecting each available version of
Kubernetes currently in the cache, and running <code>kubectl --context rancher-desktop cluster-info</code> to ensure that an appropriate
version of the <code>kubectl</code> client is installed.</p><p>You <em>could</em> install versioned <code>kubectl</code>s manually. This is covered in the next section.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-an-air-gapped-system">Preparing an Air-Gapped System<a href="#preparing-an-air-gapped-system" class="hash-link" aria-label="Direct link to Preparing an Air-Gapped System" title="Direct link to Preparing an Air-Gapped System">â€‹</a></h3><p>Here we assume you have some kind of removable media which you can populate on an internet-connected system, and then move over to the air-gapped system.</p><p>There are two directories that need to be populated in order for Rancher Desktop to function off-line:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-cache-directory">The Cache Directory<a href="#the-cache-directory" class="hash-link" aria-label="Direct link to The Cache Directory" title="Direct link to The Cache Directory">â€‹</a></h4><p>To populate a source disk (which we refer to here as <code>%SOURCEDISK%</code>, although it is probably some kind of removable medium like a USB thumb drive), you need the following files:</p><ul><li><code>k3s-versions.json</code> -- this file is created by Rancher Desktop. It reads a raw JSON file from <code>https://update.k3s.io/v1-release/channels</code> and converts it into a different kind of JSON file. Currently there is no utility to do that conversion; the easiest way to get this file is to run Rancher Desktop on a connected system and save the <code>CACHE/k3s-versions.json</code> file (see below for where <code>CACHE</code> exists on different platforms).</li><li>Tar archives of Kubernetes K3s images. These are listed at <a href="https://github.com/k3s-io/k3s/releases" target="_blank" rel="noopener noreferrer">https://github.com/k3s-io/k3s/releases</a>. You&#x27;ll want to download either the <code>k3s-airgap-images-amd64.tar</code> for AMD/Intel machines, <code>k3s-airgap-images-arm64.tar</code> for M1 machines, or the respective <code>*.tar.zst</code> compressed tarball if you are using <code>k3s</code> v1.26.1 and above. Finally you&#x27;ll need to download the <code>k3s</code> executable for the selected version. For example, the following commands will let you work with K3s v1.24.3 build 1 offline:</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd .../CACHE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir v1.24.3+k3s1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd v1.24.3+k3s1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://github.com/k3s-io/k3s/releases/download/v1.24.3%2Bk3s1/k3s-airgap-images-amd64.tar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://github.com/k3s-io/k3s/releases/download/v1.24.3%2Bk3s1/sha256sum-amd64.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://github.com/k3s-io/k3s/releases/download/v1.24.3%2Bk3s1/k3s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Windows</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">macOS</li><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Linux</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>On Windows, the cache directory is at <code>$env:HOMEDRIVE%\$env:HOMEPATH\AppData\Local\rancher-desktop\cache\k3s</code>, and can be created with the command</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -Force $env:HOMEDRIVE%\$env:HOMEPATH\AppData\Local\rancher-desktop\cache\k3s</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Assuming you have some source media, you would also run the following commands to pre-populate the cache:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">copy-item -Force $env:SOURCEDISK\k3s-versions.json $env:HOMEDRIVE%\$env:HOMEPATH\AppData\Local\rancher-desktop\cache\</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">copy-item -Recurse -Force $env:SOURCEDISK\v&lt;MAJOR&gt;.&lt;MINOR&gt;.&lt;PATCH&gt;+k3s&lt;BUILD&gt; $env:HOMEDRIVE%\$env:HOMEPATH\AppData\Local\rancher-desktop\cache\k3s\</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>On macOS, the cache directory is at <code>$HOME/Library/Caches/rancher-desktop</code> and the commands to populate it would be</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CACHEDIR=$HOME/Library/Caches/rancher-desktop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $CACHEDIR/k3s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp $SOURCEDISK/k3s-versions.json $CACHEDIR/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp -r $SOURCEDISK/v&lt;MAJOR&gt;.&lt;MINOR&gt;.&lt;PATCH&gt;+k3s&lt;BUILD&gt; $CACHEDIR/k3s/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6"><p>On Linux, the cache directory is at <code>$HOME/.cache/rancher-desktop</code> and the commands to populate it would be</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CACHEDIR=$HOME/.cache/rancher-desktop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $CACHEDIR/k3s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp $SOURCEDISK/k3s-versions.json $CACHEDIR/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp -r $SOURCEDISK/v&lt;MAJOR&gt;.&lt;MINOR&gt;.&lt;PATCH&gt;+k3s&lt;BUILD&gt; $CACHEDIR/k3s/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-kuberlr-directory">The kuberlr Directory<a href="#the-kuberlr-directory" class="hash-link" aria-label="Direct link to The kuberlr Directory" title="Direct link to The kuberlr Directory">â€‹</a></h4><p>The location of this directory is more straightforward. On all platforms, it&#x27;s at <code>HOME/.kuberlr/PLATFORM-ARCH</code> where:</p><ul><li><code>HOME</code> is the home directory: usually <code>$env:HOMEDRIVE%\$env:HOMEPATH</code> on Windows, and <code>~</code> or <code>$HOME</code> on macOS and Linux.</li><li><code>PLATFORM</code> is one of <code>windows</code>, <code>linux</code>, or <code>darwin</code>.</li><li><code>ARCH</code> is <code>aarch64</code> on M1 machines, and <code>amd64</code> everywhere else.</li></ul><p>To populate it, determine which versions of Kubernetes you&#x27;ll be using, and download the appropriate executables from the internet. These would be in:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Windows</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">macOS</li><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Linux</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><code>https://dl.k8s.io/VERSION/bin/PLATFORM/CPU/kubectl.exe</code></p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><code>https://dl.k8s.io/VERSION/bin/PLATFORM/CPU/kubectl</code></p></div><div role="tabpanel" class="tabItem_Ymn6"><p><code>https://dl.k8s.io/VERSION/bin/PLATFORM/CPU/kubectl</code></p></div></div></div><p>Where:</p><ul><li><code>VERSION</code> will have the form <code>vMAJOR.MINOR.PATCH</code> (like <code>v1.22.1</code>),</li><li><code>PLATFORM</code> will be one of <code>darwin</code>, <code>linux</code>, or <code>windows</code>,</li><li><code>CPU</code> will <code>arm64</code> on M1 machines and <code>amd64</code> everywhere else.</li></ul><p>For example, to get a kubectl for Windows that will work with Kubernetes v1.22, this Windows command-shell (not PowerShell) command will put it on the <code>SOURCEDISK</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wget -O %SOURCEDISK/kubectl1.22.1.exe https://dl.k8s.io/v1.22.1/bin/windows/amd64/kubectl.exe</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="a-note-on-versions">A Note on Versions<a href="#a-note-on-versions" class="hash-link" aria-label="Direct link to A Note on Versions" title="Direct link to A Note on Versions">â€‹</a></h5><p>Kubectl clients are guaranteed to work with servers that are running the same MAJOR version and differ in the MINOR version by at most 1. So for example, if your organization is working with Kubernetes versions v1.21.x, v1.22.x, and v1.23.x, for any patch-version of <code>x</code>, you would only need to install <code>kubectl1.22.x</code> in the <code>.kuberlr</code> directory. But if you copy a <code>v1.24.x</code> of Kubernetes into the <code>CACHE</code> directory, you&#x27;ll need to ensure there&#x27;s a compatible <code>kubectl</code> in the <code>.kuberlr</code> directory as well (any of <code>v1.23.x</code>, <code>v1.24.x</code>, or <code>v1.25.x</code> would suffice).</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher-sandbox/docs.rancherdesktop.io/edit/main/versioned_docs/version-1.8/how-to-guides/running-air-gapped.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/1.8/how-to-guides/increasing-open-file-limit"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Increasing Open File Limit</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/1.8/references/architecture"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Architecture</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-note-for-windows-users" class="table-of-contents__link toc-highlight">A Note for Windows users</a></li><li><a href="#network-sensitive-areas" class="table-of-contents__link toc-highlight">Network-Sensitive areas</a></li><li><a href="#existing-deployments" class="table-of-contents__link toc-highlight">Existing Deployments</a></li><li><a href="#preparing-an-air-gapped-system" class="table-of-contents__link toc-highlight">Preparing an Air-Gapped System</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 SUSE. Rancher Desktop is an open source project of the SUSE Rancher Engineering group. This docs site is built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.46ace309.js"></script>
<script src="/assets/js/main.5ef57267.js"></script>
</body>
</html>